#tag Window
Begin Window ProfileWizardWin
   BackColor       =   &cFFFFFF00
   Backdrop        =   0
   CloseButton     =   True
   Composite       =   False
   Frame           =   0
   FullScreen      =   False
   FullScreenButton=   False
   HasBackColor    =   False
   Height          =   754
   ImplicitInstance=   True
   LiveResize      =   "True"
   MacProcID       =   0
   MaxHeight       =   32000
   MaximizeButton  =   False
   MaxWidth        =   32000
   MenuBar         =   149806200
   MenuBarVisible  =   True
   MinHeight       =   64
   MinimizeButton  =   True
   MinWidth        =   710
   Placement       =   1
   Resizeable      =   True
   Title           =   "#kProfileWizard"
   Visible         =   False
   Width           =   749
   Begin GroupBox GroupBox1
      AutoDeactivate  =   True
      Bold            =   False
      Caption         =   "#kSearchThresholds"
      Enabled         =   True
      Height          =   162
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   12
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   True
      Scope           =   0
      TabIndex        =   0
      TabPanelIndex   =   0
      TabStop         =   True
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   5
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   354
      Begin Label Label1
         AutoDeactivate  =   True
         Bold            =   False
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   24
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   False
         LockTop         =   True
         Multiline       =   False
         Scope           =   0
         Selectable      =   False
         TabIndex        =   0
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   "#kTrusted1"
         TextAlign       =   0
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   34
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   227
      End
      Begin TextField TrustedField
         AcceptTabs      =   False
         Alignment       =   0
         AutoDeactivate  =   True
         AutomaticallyCheckSpelling=   False
         BackColor       =   &cFFFF00FF
         Bold            =   False
         Border          =   True
         CueText         =   ""
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Format          =   ""
         Height          =   22
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   312
         LimitText       =   0
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         Mask            =   ""
         Password        =   False
         ReadOnly        =   False
         Scope           =   0
         TabIndex        =   1
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   ""
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   32
         Transparent     =   False
         Underline       =   False
         UseFocusRing    =   True
         Visible         =   True
         Width           =   46
      End
      Begin Label Label2
         AutoDeactivate  =   True
         Bold            =   False
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   24
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   False
         LockTop         =   True
         Multiline       =   False
         Scope           =   0
         Selectable      =   False
         TabIndex        =   2
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   "#kGathering1"
         TextAlign       =   0
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   68
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   227
      End
      Begin TextField GatheringField
         AcceptTabs      =   False
         Alignment       =   0
         AutoDeactivate  =   True
         AutomaticallyCheckSpelling=   False
         BackColor       =   &cFFFF00FF
         Bold            =   False
         Border          =   True
         CueText         =   "10"
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Format          =   ""
         Height          =   22
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   312
         LimitText       =   0
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         Mask            =   ""
         Password        =   False
         ReadOnly        =   False
         Scope           =   0
         TabIndex        =   3
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   ""
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   66
         Transparent     =   False
         Underline       =   False
         UseFocusRing    =   True
         Visible         =   True
         Width           =   46
      End
      Begin Label Label3
         AutoDeactivate  =   True
         Bold            =   False
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   24
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   False
         LockTop         =   True
         Multiline       =   False
         Scope           =   0
         Selectable      =   False
         TabIndex        =   4
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   "#kNoise"
         TextAlign       =   0
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   100
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   227
      End
      Begin TextField NoiseField
         AcceptTabs      =   False
         Alignment       =   0
         AutoDeactivate  =   True
         AutomaticallyCheckSpelling=   False
         BackColor       =   &cFFFF00FF
         Bold            =   False
         Border          =   True
         CueText         =   ""
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Format          =   ""
         Height          =   22
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   312
         LimitText       =   0
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         Mask            =   ""
         Password        =   False
         ReadOnly        =   False
         Scope           =   0
         TabIndex        =   5
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   ""
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   98
         Transparent     =   False
         Underline       =   False
         UseFocusRing    =   True
         Visible         =   True
         Width           =   46
      End
      Begin TextField MASTField
         AcceptTabs      =   False
         Alignment       =   0
         AutoDeactivate  =   True
         AutomaticallyCheckSpelling=   False
         BackColor       =   &cFFFF00FF
         Bold            =   False
         Border          =   True
         CueText         =   "1e-6"
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Format          =   ""
         Height          =   22
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   312
         LimitText       =   0
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         Mask            =   ""
         Password        =   False
         ReadOnly        =   False
         Scope           =   0
         TabIndex        =   6
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   ""
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   130
         Transparent     =   False
         Underline       =   False
         UseFocusRing    =   True
         Visible         =   True
         Width           =   46
      End
      Begin Label Label4
         AutoDeactivate  =   True
         Bold            =   False
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox1"
         Italic          =   False
         Left            =   24
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   False
         LockTop         =   True
         Multiline       =   False
         Scope           =   0
         Selectable      =   False
         TabIndex        =   7
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   "MAST p-value threshold:"
         TextAlign       =   0
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   132
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   227
      End
   End
   Begin GroupBox GroupBox3
      AutoDeactivate  =   True
      Bold            =   False
      Caption         =   "Post-processing"
      Enabled         =   True
      Height          =   162
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   382
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      Scope           =   0
      TabIndex        =   2
      TabPanelIndex   =   0
      TabStop         =   True
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   5
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   354
      Begin CheckBox WithinORFBox
         AutoDeactivate  =   True
         Bold            =   False
         Caption         =   "#kIgnoreWithinORF"
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox3"
         Italic          =   False
         Left            =   402
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   False
         LockRight       =   True
         LockTop         =   True
         Scope           =   0
         State           =   0
         TabIndex        =   1
         TabPanelIndex   =   0
         TabStop         =   True
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   66
         Transparent     =   False
         Underline       =   False
         Value           =   False
         Visible         =   True
         Width           =   326
      End
      Begin Label Label5
         AutoDeactivate  =   True
         Bold            =   False
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox3"
         Italic          =   False
         Left            =   402
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   False
         LockRight       =   True
         LockTop         =   True
         Multiline       =   False
         Scope           =   0
         Selectable      =   False
         TabIndex        =   2
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   "Feature to add:"
         TextAlign       =   0
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   99
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   116
      End
      Begin ComboBox FeatureCombo
         AutoComplete    =   False
         AutoDeactivate  =   True
         Bold            =   False
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Hint            =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox3"
         InitialValue    =   ""
         Italic          =   False
         Left            =   530
         ListIndex       =   0
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   False
         LockRight       =   True
         LockTop         =   True
         Scope           =   0
         TabIndex        =   3
         TabPanelIndex   =   0
         TabStop         =   True
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   98
         Transparent     =   False
         Underline       =   False
         UseFocusRing    =   True
         Visible         =   True
         Width           =   198
      End
      Begin TextField KeyField
         AcceptTabs      =   False
         Alignment       =   0
         AutoDeactivate  =   True
         AutomaticallyCheckSpelling=   False
         BackColor       =   &cFFFF00FF
         Bold            =   False
         Border          =   True
         CueText         =   ""
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Format          =   ""
         Height          =   22
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox3"
         Italic          =   False
         Left            =   493
         LimitText       =   0
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   False
         LockRight       =   True
         LockTop         =   True
         Mask            =   ""
         Password        =   False
         ReadOnly        =   False
         Scope           =   0
         TabIndex        =   5
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   "bound_moiety"
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   130
         Transparent     =   False
         Underline       =   False
         UseFocusRing    =   True
         Visible         =   True
         Width           =   128
      End
      Begin CheckBox PalindromicBox
         AutoDeactivate  =   True
         Bold            =   False
         Caption         =   "#kPalindromicSite"
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox3"
         Italic          =   False
         Left            =   402
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   False
         LockRight       =   True
         LockTop         =   True
         Scope           =   0
         State           =   0
         TabIndex        =   0
         TabPanelIndex   =   0
         TabStop         =   True
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   34
         Transparent     =   False
         Underline       =   False
         Value           =   False
         Visible         =   True
         Width           =   326
      End
      Begin Label Label6
         AutoDeactivate  =   True
         Bold            =   False
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Height          =   20
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox3"
         Italic          =   False
         Left            =   402
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   False
         LockRight       =   True
         LockTop         =   True
         Multiline       =   False
         Scope           =   0
         Selectable      =   False
         TabIndex        =   6
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   "#kQualifier"
         TextAlign       =   0
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   130
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   79
      End
      Begin TextField ValueField
         AcceptTabs      =   False
         Alignment       =   0
         AutoDeactivate  =   True
         AutomaticallyCheckSpelling=   False
         BackColor       =   &cFFFF00FF
         Bold            =   False
         Border          =   True
         CueText         =   "protein name"
         DataField       =   ""
         DataSource      =   ""
         Enabled         =   True
         Format          =   ""
         Height          =   22
         HelpTag         =   ""
         Index           =   -2147483648
         InitialParent   =   "GroupBox3"
         Italic          =   False
         Left            =   627
         LimitText       =   0
         LockBottom      =   False
         LockedInPosition=   False
         LockLeft        =   False
         LockRight       =   True
         LockTop         =   True
         Mask            =   ""
         Password        =   False
         ReadOnly        =   False
         Scope           =   0
         TabIndex        =   7
         TabPanelIndex   =   0
         TabStop         =   True
         Text            =   ""
         TextColor       =   &c00000000
         TextFont        =   "System"
         TextSize        =   0.0
         TextUnit        =   0
         Top             =   130
         Transparent     =   False
         Underline       =   False
         UseFocusRing    =   True
         Visible         =   True
         Width           =   101
      End
   End
   Begin TextArea InfoArea
      AcceptTabs      =   False
      Alignment       =   0
      AutoDeactivate  =   True
      AutomaticallyCheckSpelling=   True
      BackColor       =   &cFFFF00FF
      Bold            =   False
      Border          =   True
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Format          =   ""
      Height          =   128
      HelpTag         =   ""
      HideSelection   =   True
      Index           =   -2147483648
      Italic          =   False
      Left            =   12
      LimitText       =   0
      LineHeight      =   0.0
      LineSpacing     =   1.0
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   True
      Mask            =   ""
      Multiline       =   True
      ReadOnly        =   False
      Scope           =   0
      ScrollbarHorizontal=   False
      ScrollbarVertical=   True
      Styled          =   False
      TabIndex        =   3
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   "Profile info"
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   365
      Transparent     =   False
      Underline       =   False
      UseFocusRing    =   True
      Visible         =   True
      Width           =   724
   End
   Begin PushButton SaveButton
      AutoDeactivate  =   True
      Bold            =   False
      ButtonStyle     =   0
      Cancel          =   False
      Caption         =   "Save..."
      Default         =   False
      Enabled         =   False
      Height          =   20
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   646
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   False
      Scope           =   0
      TabIndex        =   4
      TabPanelIndex   =   0
      TabStop         =   True
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   720
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   90
   End
   Begin PushButton CancelButton
      AutoDeactivate  =   True
      Bold            =   False
      ButtonStyle     =   0
      Cancel          =   True
      Caption         =   "#kCancel"
      Default         =   False
      Enabled         =   True
      Height          =   20
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   544
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   False
      Scope           =   0
      TabIndex        =   5
      TabPanelIndex   =   0
      TabStop         =   True
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   720
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   90
   End
   Begin BevelButton BevelButton1
      AcceptFocus     =   True
      AutoDeactivate  =   True
      BackColor       =   &c00000000
      Bevel           =   4
      Bold            =   False
      ButtonType      =   1
      Caption         =   "Lock"
      CaptionAlign    =   3
      CaptionDelta    =   0
      CaptionPlacement=   1
      Enabled         =   True
      HasBackColor    =   False
      HasMenu         =   0
      Height          =   22
      HelpTag         =   ""
      Icon            =   0
      IconAlign       =   0
      IconDX          =   0
      IconDY          =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   12
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   False
      LockTop         =   False
      Scope           =   0
      TabIndex        =   6
      TabPanelIndex   =   0
      TabStop         =   True
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   720
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   89
   End
   Begin PopupMenu TFhmmPopup
      AutoDeactivate  =   True
      Bold            =   False
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Height          =   20
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      InitialValue    =   ""
      Italic          =   False
      Left            =   158
      ListIndex       =   0
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   True
      Scope           =   0
      TabIndex        =   7
      TabPanelIndex   =   0
      TabStop         =   True
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   177
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   578
   End
   Begin Label Label7
      AutoDeactivate  =   True
      Bold            =   False
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Height          =   20
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   12
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   False
      LockTop         =   True
      Multiline       =   False
      Scope           =   0
      Selectable      =   False
      TabIndex        =   8
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   "TF family HMM:"
      TextAlign       =   0
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   178
      Transparent     =   True
      Underline       =   False
      Visible         =   True
      Width           =   145
   End
   Begin Label Label8
      AutoDeactivate  =   True
      Bold            =   False
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Height          =   20
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   12
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   False
      LockTop         =   True
      Multiline       =   False
      Scope           =   0
      Selectable      =   False
      TabIndex        =   9
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   "CRtag coords:"
      TextAlign       =   0
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   209
      Transparent     =   True
      Underline       =   False
      Visible         =   True
      Width           =   134
   End
   Begin TextField CRtagField
      AcceptTabs      =   False
      Alignment       =   0
      AutoDeactivate  =   True
      AutomaticallyCheckSpelling=   False
      BackColor       =   &cFFFF00FF
      Bold            =   False
      Border          =   True
      CueText         =   ""
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Format          =   ""
      Height          =   22
      HelpTag         =   ""
      Index           =   -2147483648
      Italic          =   False
      Left            =   158
      LimitText       =   0
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   True
      Mask            =   ""
      Password        =   False
      ReadOnly        =   False
      Scope           =   0
      TabIndex        =   10
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   ""
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   209
      Transparent     =   False
      Underline       =   False
      UseFocusRing    =   True
      Visible         =   True
      Width           =   250
   End
   Begin TextArea SeedProteinArea
      AcceptTabs      =   False
      Alignment       =   0
      AutoDeactivate  =   True
      AutomaticallyCheckSpelling=   True
      BackColor       =   &cFFFF00FF
      Bold            =   False
      Border          =   True
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Format          =   ""
      Height          =   117
      HelpTag         =   "Fasta title line should end with _GB=<Accession>|UP=<Accession> (or just GB=<Accession>)."
      HideSelection   =   True
      Index           =   -2147483648
      Italic          =   False
      Left            =   12
      LimitText       =   0
      LineHeight      =   0.0
      LineSpacing     =   1.0
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   True
      Mask            =   ""
      Multiline       =   True
      ReadOnly        =   False
      Scope           =   0
      ScrollbarHorizontal=   False
      ScrollbarVertical=   True
      Styled          =   True
      TabIndex        =   12
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   ">protein_id\nsequence"
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   240
      Transparent     =   False
      Underline       =   False
      UseFocusRing    =   True
      Visible         =   True
      Width           =   724
   End
   Begin Label Label10
      AutoDeactivate  =   True
      Bold            =   False
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Height          =   20
      HelpTag         =   ""
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   420
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      Multiline       =   False
      Scope           =   0
      Selectable      =   False
      TabIndex        =   13
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   "CRtag sequence:"
      TextAlign       =   0
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   210
      Transparent     =   True
      Underline       =   False
      Visible         =   True
      Width           =   137
   End
   Begin TextField CRtagSeqField
      AcceptTabs      =   False
      Alignment       =   0
      AutoDeactivate  =   True
      AutomaticallyCheckSpelling=   False
      BackColor       =   &cFFFF00FF
      Bold            =   False
      Border          =   True
      CueText         =   ""
      DataField       =   ""
      DataSource      =   ""
      Enabled         =   True
      Format          =   ""
      Height          =   22
      HelpTag         =   ""
      Index           =   -2147483648
      Italic          =   False
      Left            =   560
      LimitText       =   0
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      Mask            =   ""
      Password        =   False
      ReadOnly        =   False
      Scope           =   0
      TabIndex        =   14
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   ""
      TextColor       =   &c00000000
      TextFont        =   "System"
      TextSize        =   0.0
      TextUnit        =   0
      Top             =   209
      Transparent     =   False
      Underline       =   False
      UseFocusRing    =   True
      Visible         =   True
      Width           =   176
   End
   Begin Listbox RefsList
      AllowAutoDeactivate=   True
      AllowAutoHideScrollbars=   True
      AllowExpandableRows=   False
      AllowFocusRing  =   True
      AllowResizableColumns=   True
      AllowRowDragging=   False
      AllowRowReordering=   False
      Bold            =   False
      ColumnCount     =   3
      ColumnWidths    =   "*,200,120"
      DataField       =   ""
      DataSource      =   ""
      DefaultRowHeight=   -1
      DropIndicatorVisible=   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      GridLinesHorizontalStyle=   "2"
      GridLinesVerticalStyle=   "2"
      HasBorder       =   True
      HasHeader       =   True
      HasHorizontalScrollbar=   False
      HasVerticalScrollbar=   True
      HeadingIndex    =   -1
      Height          =   104
      Index           =   -2147483648
      InitialParent   =   ""
      InitialValue    =   "References	DOI/PMID/DB Link	Evidence Codes"
      Italic          =   False
      Left            =   12
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   False
      RequiresSelection=   False
      RowSelectionType=   "0"
      Scope           =   0
      TabIndex        =   16
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   501
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   724
      _ScrollOffset   =   0
      _ScrollWidth    =   -1
   End
   Begin Listbox CuratorList
      AllowAutoDeactivate=   True
      AllowAutoHideScrollbars=   True
      AllowExpandableRows=   False
      AllowFocusRing  =   True
      AllowResizableColumns=   True
      AllowRowDragging=   True
      AllowRowReordering=   True
      Bold            =   False
      ColumnCount     =   3
      ColumnWidths    =   ""
      DataField       =   ""
      DataSource      =   ""
      DefaultRowHeight=   -1
      DropIndicatorVisible=   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      GridLinesHorizontalStyle=   "2"
      GridLinesVerticalStyle=   "2"
      HasBorder       =   True
      HasHeader       =   True
      HasHorizontalScrollbar=   False
      HasVerticalScrollbar=   True
      HeadingIndex    =   -1
      Height          =   97
      Index           =   -2147483648
      InitialParent   =   ""
      InitialValue    =   "Curator	Address	Curation history"
      Italic          =   False
      Left            =   12
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   False
      RequiresSelection=   False
      RowSelectionType=   "0"
      Scope           =   0
      TabIndex        =   18
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   613
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   724
      _ScrollOffset   =   0
      _ScrollWidth    =   -1
   End
   Begin PushButton SaveToDatabaseButton
      AllowAutoDeactivate=   True
      Bold            =   False
      Cancel          =   False
      Caption         =   "Export to database"
      Default         =   False
      Enabled         =   False
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   357
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   False
      MacButtonStyle  =   "0"
      Scope           =   0
      TabIndex        =   19
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   720
      Transparent     =   False
      Underline       =   False
      Visible         =   False
      Width           =   135
   End
   Begin PushButton AddRefsButton
      AllowAutoDeactivate=   True
      Bold            =   False
      Cancel          =   False
      Caption         =   "Add refs"
      Default         =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   113
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   False
      LockTop         =   False
      MacButtonStyle  =   "0"
      Scope           =   0
      TabIndex        =   19
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   "Scan profile info for DOIs and fill references list with matching citations"
      Top             =   720
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   80
   End
   Begin PushButton AddCuratorButton
      AllowAutoDeactivate=   True
      Bold            =   False
      Cancel          =   False
      Caption         =   "Add curation"
      Default         =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   205
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   False
      LockTop         =   False
      MacButtonStyle  =   "0"
      Scope           =   0
      TabIndex        =   20
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   "Append a line to curation history with current date and curator information from settings"
      Top             =   720
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   110
   End
End
#tag EndWindow

#tag WindowCode
	#tag Event
		Function CancelClose(appQuitting as Boolean) As Boolean
		  me.hide
		End Function
	#tag EndEvent

	#tag Event
		Sub Open()
		  AdjustLayout4linux(me)
		End Sub
	#tag EndEvent


	#tag MenuHandler
		Function FileClose() As Boolean Handles FileClose.Action
			me.Hide
			Return True
			
		End Function
	#tag EndMenuHandler


	#tag Method, Flags = &h0
		Sub CheckGathering()
		  Dim Noise As Single =Val(NoiseField.Text)
		  Dim Trust As Single = Val(TrustedField.Text)
		  
		  If Noise > 5 And Trust > 5 Then
		    If GatheringField.Text="" Then
		      GatheringField.Hint=Str((Noise+Trust)/2)
		    End If
		  End If
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21
		Private Function CollectInfo() As Dictionary
		  Dim SigFile As FolderItem
		  Dim dlg As New SaveAsDialog
		  Dim f, CDSFile as folderitem
		  Dim hmmSearchRes, hmmFile2find, hmmPath, ProtName as string
		  dim m,n as integer
		  Dim SigFileVV As VirtualVolume
		  
		  
		  If Keyboard.AsyncOptionKey Then Return Nil 'allow adding rows to listboxes
		  
		  LogoWin.show
		  
		  'hmmsearch treats everything after first white space as sequence, so have to replace spaces/tabs
		  dim Pseq as string
		  Pseq=ReplaceAll(SeedProteinArea.text," ","_")   'hmmer doesn't like spaces
		  Pseq=ReplaceAll(Pseq,chr(9),"_")                'hmmer doesn't like tabs
		  
		  
		  
		  'find HMM file path:
		  hmmFile2find=TFhmmPopup.Text
		  
		  f=Resources_f.Child("TF_HMMs")
		  Dim HMM_ACC As String
		  if f<>Nil then
		    if f.exists then
		      
		      m=f.Count
		      for n=1 to m
		        'dim dis as string= f.Item(n).DisplayName+": "+f.Item(n).type
		        'msgbox dis
		        
		        if right(f.Item(n).name,4)=".hmm" then
		          if f.Item(n).DisplayName=hmmFile2find then
		            hmmPath = f.Item(n).ShellPath
		            
		            'get HMM accession code
		            Dim s,aline As String
		            Dim instream As textinputstream
		            InStream = f.Item(n).OpenAsTextFile
		            If InStream<>Nil Then
		              While Not InStream.EOF
		                aLine=InStream.readLine
		                If Left(aLine,6)="ACC   " Then
		                  HMM_ACC=Trim(Right(aline,Len(aline)-6))
		                  InStream.close
		                  Exit
		                End If
		              Wend
		            End If
		            exit
		          end if
		          
		        end if
		      next
		      
		      if hmmpath="" then
		        msgbox "Can't find the HMM file"
		      end if
		      
		    end if
		  end if
		  
		  
		  
		  'cutoffs are hopefully read, convert the alignment to Stockholm format and store it in the temp file
		  dim stock as FolderItem = TemporaryFolder.child("stock")
		  if stock <> nil then
		    dim AlignmentFile,rcAlignmentFile as FolderItem
		    'copy alignment to temp (for weblogo)
		    
		    AlignmentFile=TemporaryFolder.Child(LogoWin.LogoFile.DisplayName)
		    
		    'CopyFileTo fails if the target exists, hence this check:
		    If AlignmentFile <> Nil then
		      if AlignmentFile.exists then
		        if AlignmentFile.ShellPath<>LogoWin.LogoFile.ShellPath then
		          AlignmentFile.delete
		          LogoWin.LogoFile.CopyFileTo(TemporaryFolder)
		        else
		          'the file is already there
		        end if
		      else
		        LogoWin.LogoFile.CopyFileTo(TemporaryFolder)
		      End If
		    End If
		    
		    
		    'check if the site is marked as palindromic
		    if palindromicBox.value then 'reverse complement every site
		      
		      if AlignmentFile<>Nil AND AlignmentFile.Exists then
		        'check if the alignment is already RC'd
		        dim firstLine,thirdLine as string
		        dim tis as TextInputStream
		        tis=AlignmentFile.OpenAsTextFile
		        if tis<>nil then
		          firstLine=tis.readLine
		          thirdLine=tis.readLine
		          thirdLine=tis.readLine
		          tis.Close
		        End If
		        
		        if left(firstLine,3)=">f_" and left(thirdLine,3)=">r_" then
		          'looks like the seqs are palindromised already
		        else
		          rcAlignmentFile=TemporaryFolder.child("rcAliFile")
		          RevCompAlignment(AlignmentFile,rcAlignmentFile,true)
		          AlignmentFile.Delete
		          AlignmentFile=rcAlignmentFile
		          AlignmentFile.name=LogoWin.LogoFile.DisplayName
		        End If
		      end if
		      
		    end if
		    
		    
		    if AlignmentFile<>Nil AND AlignmentFile.Exists then
		      
		      
		      'SigFileVV = SigFile.CreateVirtualVolume
		      'If SigFileVV <> nil Then
		      If True Then
		        'first copy the existing files:
		        'AlignmentFile.CopyFileTo(SigFileVV.Root)    'broken in Linux
		        'CopyFileToVV(AlignmentFile,SigFileVV)                          'alignment
		        'get the base of profile name
		        dim baseName as string
		        'basename= NthField(SigFile.DisplayName,".sig",1)
		        var temp() as string = LogoWin.Title.Split("SigmoID: ")
		        basename = temp(1)
		        
		        'alignment file can have any name, so checking it here:
		        
		        var CRTagID as integer
		        var error as string
		        var query as new MSSQLServerDatabase()
		        var outputMap as new Dictionary()
		        outputMap.Value("dirName") = baseName
		        outputMap.Value("sl") = baseName.Split("_")
		        
		        
		        'get seed protein name and sequence
		        dim proteinID, proteinSeq as string
		        dim lineBreakC as integer
		        proteinSeq=trim(Pseq)
		        #if TargetWindows
		          
		          lineBreakC=instr(proteinSeq,chr(13))
		          if lineBreakC=0 then
		            msgbox "Incorrect seed protein data. Please use FASTA format with protein_id on the first line and sequence on the following lines."
		            return Nil
		          End If
		          proteinID=NthField(proteinSeq,chr(13),1)
		        #else
		          lineBreakC=instr(proteinSeq,EndOfLine.Unix)
		          if lineBreakC=0 then
		            msgbox "Incorrect seed protein data. Please use FASTA format with protein_id on the first line and sequence on the following lines."
		            return Nil
		          End If
		          proteinID=NthField(proteinSeq,EndOfLine.Unix,1)
		        #endif
		        proteinID=right(proteinID,len(proteinID)-1) 'remove the > sign
		        proteinSeq=CleanUp(right(proteinSeq,len(proteinSeq)-lineBreakC))
		        
		        outputMap.Value("HMM_ACC") = HMM_ACC
		        outputMap.Value("CRTag_coord") = trim(CRtagField.text)
		        outputMap.Value("ProteinID") = proteinID
		        outputMap.Value("Sequence") = proteinSeq
		        outputMap.Value("info") = InfoArea.text.trim()
		        
		        
		        
		        'Save MEME data
		        var pwm as string = ""
		        dim file2copy as folderitem
		        If MEMEconvert(LogoWin.Logofile,PalindromicBox.value)=0 then
		          file2copy=TemporaryFolder.child("meme.txt")                     'meme.txt
		          if file2copy<>Nil AND file2copy.exists then
		            pwm = TextInputStream.Open(file2copy).ReadAll()
		            If file2copy.LastErrorCode <> 0 Then
		              msgbox "MEME result file copy error"
		            Else
		              outputMap.Value("pwm") = pwm
		            End If
		          end if
		        end if
		        
		        'build hmm:
		        'need a real file for hmmbuild output:
		        var hmm as string = ""
		        var f2 as FolderItem = TemporaryFolder.child(basename+".hmm")      'place to save
		        if f2<>nil then
		          FixPath4Windows(f2)
		          if hmmbuild(stock.ShellPath,f2.ShellPath) then
		            if f2.exists then
		              if f2<>Nil then
		                hmm = TextInputStream.Open(f2).ReadAll()
		                outputMap.Value("hmm") = hmm
		              else
		                'beep
		              end if
		            else
		              'beep
		            end if
		          else
		            'error message handled by hmmbuild most of the time
		            logowin.WriteToSTDOUT(EndOfLine+"hmmbuild error")
		            return Nil
		          end if
		        else
		          msgbox "Creating hmm failed"
		          return Nil
		        end if
		        
		        
		        //writing operators
		        
		        If AlignmentFile<>Nil Then
		          var in_ as TextInputStream
		          in_ = in_.Open(AlignmentFile)
		          var id() as string
		          var oper() as string
		          While not in_.EndOfFile()
		            var id_temp as string = in_.ReadLine()
		            id_temp = id_temp.right(id_temp.Length() - 1)
		            id_temp = id_temp.ReplaceAll("'s", " is")
		            id_temp = id_temp.ReplaceAll("'", " ")
		            var oper_temp as string = in_.ReadLine()
		            If id_temp.Length > 0 and oper_temp.Length > 0 Then
		              id.AddRow(id_temp)
		              oper.AddRow(oper_temp)
		            End If
		          Wend
		          in_.Close()
		          outputMap.Value("id") = id
		          outputMap.Value("operator") = oper
		        End If
		        
		        outputMap.Value("TC") = trim(TrustedField.text)
		        outputMap.Value("GA") = trim(GatheringField.text)
		        outputMap.Value("NC") = trim(NoiseField.text)
		        outputMap.Value("cut_ga") = "True"
		        if PalindromicBox.value then
		          outputMap.Value("HmmGenP") = "True"
		        else
		          outputMap.Value("HmmGenP") = "False"
		        end if
		        if WithinORFBox.value then
		          outputMap.Value("HmmGenI") = "True"
		        else
		          outputMap.Value("HmmGenI") = "False"
		        end if
		        outputMap.Value("HmmGenF") = FeatureCombo.Text
		        outputMap.Value("HmmGenQ") = KeyField.Text+"#"+ValueField.Text
		        if MASTField.Text.Length > 0 then
		          outputMap.Value("mastGenV") = "True"
		        else
		          outputMap.Value("mastGenV") = "False"
		        end if
		        
		        
		        // Reference
		        
		        var reference() as string
		        var DOI() as string
		        var evidenceTypes() as string
		        var year() as string
		        For i as integer = 0 To RefsList.RowCount-1
		          Var reference_temp As String = RefsList.CellValueAt(i,0)
		          Var DOI_temp As String = RefsList.CellValueAt(i,1)
		          var evidenceTypes_temp as string = RefsList.CellValueAt(i,2)
		          
		          //extract year
		          var year_temp as string
		          var pYstart as integer = reference_temp.IndexOf(" (")
		          var pYend as integer = reference_temp.IndexOf(").")
		          If pYstart > 0 and pYend > 0 and pYend - pYstart > 2 Then
		            year_temp = reference_temp.Middle(pYstart + 2, pYend - pYstart - 2)
		          End if
		          
		          reference.AddRow(reference_temp)
		          DOI.AddRow(DOI_temp)
		          evidenceTypes.AddRow(evidenceTypes_temp)
		          year.AddRow(year_temp)
		        Next
		        outputMap.Value("reference") = reference
		        outputMap.Value("DOI") = DOI
		        outputMap.Value("type_ref") = evidenceTypes
		        outputMap.Value("year") = year
		        
		        
		        // Curators
		        
		        var name() as string
		        var email() as string
		        var type() as string
		        For i as integer = 0 To CuratorList.RowCount-1
		          var name_temp as string = CuratorList.CellValueAt(i,0)
		          var email_temp as string = CuratorList.CellValueAt(i,1)
		          var type_temp as string = CuratorList.CellValueAt(i,2)
		          
		          If name_temp.Length > 0 Then
		            name.AddRow(name_temp)
		            email.AddRow(email_temp)
		            type.AddRow(type_temp)
		          End if
		        Next
		        outputMap.Value("name") = name
		        outputMap.Value("email") = email
		        outputMap.Value("type_cur") = type
		        
		        return outputMap
		        
		        
		      else
		        Msgbox "Can't create .sig file here. Please try another location."
		      end if
		    else
		      msgbox "No alignment file found in the chosen folder. Can't proceed without it"
		      return Nil
		    end if
		  else
		    msgbox "Can't create temporary file"
		    return Nil
		  end if
		  
		  
		  
		  hide
		  Exception err
		    ExceptionHandler(err,"ProfileWisardWin:CollectInfo")
		End Function
	#tag EndMethod

	#tag Method, Flags = &h1
		Protected Sub EnableSave()
		  // Check for DOIs in the info
		  If InStr(InfoArea.Text,"DOI:")>0 Then
		    AddRefsButton.enabled=True
		  Else
		    AddRefsButton.enabled=False
		  End If
		  
		  
		  If LogoWin.LogoFile=Nil Then
		    SaveButton.enabled=false
		    return
		  else
		    SaveButton.enabled=true
		  end if
		  
		  If GatheringField.Text="" Then
		    SaveButton.enabled=false
		    return
		  end
		  
		  if len(ValueField.text)<3 then
		    SaveButton.enabled=false
		    return
		  end
		  
		  if len(InfoArea.text)<10 then
		    SaveButton.enabled=false
		    return
		  end
		  
		  if len(SeedProteinArea.text)<50 then
		    SaveButton.enabled=false
		    return
		  end
		  
		  if len(CRtagField.text)<10 then
		    SaveButton.enabled=false
		    return
		  end
		  
		  if len(CRtagField.text)<5 then
		    SaveButton.enabled=false
		    return
		  end
		  
		  if TFhmmPopup.text="" then
		    SaveButton.enabled=false
		    return
		  End
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub FillDefaults(ProfileSeqs As string)
		  // show with default cutoff values
		  // add defaults as hints only
		  
		  'Calculate Info Content
		  Dim IC As Double
		  IC=Fasta2IC(ProfileSeqs)
		  
		  'Guess the hmm cutoffs
		  Dim cutoffs As String
		  cutoffs=Bits2thresholds(IC)
		  
		  '#=GF TC "+Str(TC)+" "+Str(TC)+EndOfLine
		  '#=GF GA "+Str(GA)+" "+Str(GA)+EndOfLine
		  '#=GF NC "+Str(NC)+" "+Str(NC)+EndOfLine
		  
		  Dim TC,GA,NC As String
		  
		  TC=NthField(cutoffs,"#=GF TC ",2)
		  TC=NthField(TC," ",1)
		  TrustedField.Hint=TC
		  
		  GA=NthField(cutoffs,"#=GF GA ",2)
		  GA=NthField(GA," ",1)
		  GatheringField.Hint=GA
		  
		  NC=NthField(cutoffs,"#=GF NC ",2)
		  NC=NthField(NC," ",1)
		  NoiseField.Hint=NC
		  
		  
		  Exception err
		    ExceptionHandler(err,"ProfileWizardWin:FillDefaults")
		    
		    
		    
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Reveal(ProfileSeqs As string)
		  FillDefaults(ProfileSeqs)
		  
		  Self.show
		  
		  
		  
		  
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub UpdateCRtag()
		  'CRtagField.Text=CRtags(Me.ListIndex+1)
		  'CRtagPositions=CRtags(Me.ListIndex+1)
		  
		  Dim f, CDSFile As folderitem
		  Dim OutStream As TextOutputStream
		  Dim hmmPath, CRtag, hmmSearchRes As String
		  Dim CRtagFileName As String
		  Dim inStream As TextInputStream
		  'dim aNAME, ACC, DESC, CRtag, CRtagFileName as string
		  
		  'redim PopupFiles(-1)
		  'f=Profile_f
		  if TFhmmPopup.Text="" then return    'no model selected  nothing can be done
		  f=Resources_f.Child("TF_HMMs")
		  f=f.Child(TFhmmPopup.Text)
		  
		  If f<>Nil Then
		    hmmPath = f.ShellPath
		    'CRtagPositions=GetRealCRtag(hmmPath)
		    
		    If SeedProteinArea.TextColor=&c99999900 Then 'placefiller
		    Elseif SeedProteinArea.Text="" Then          'no sequence
		      CRtagField.Text=""
		    Else                                         'hopefully, proper protein sequence
		      ' write CDS seq to the tmp file
		      CDSFile=TemporaryFolder.child("CDSfile.fa")
		      If CDSFile<>Nil Then
		        OutStream = TextOutputStream.Create(CDSFile)
		        If outStream<>Nil Then
		          'hmmsearch treats everything after first white space as sequence, so have to replace spaces/tabs
		          'it also doesn't like spaces within the astual sequence
		          'we replace spaces/tabs within the title line by underscores and remove them from the sequence. 
		          Dim Titl,pSeq As String
		          Dim pArr(-1) As String
		          
		          pArr=SeedProteinArea.Text.Split(EndOfLine.Unix)
		          titl=ReplaceAll(pArr(0)," ","_")   'hmmer doesn't like spaces
		          titl=ReplaceAll(titl,Chr(9),"_")   'hmmer doesn't like tabs
		          pArr.RemoveRowAt(0)                   'drop the title line
		          pSeq=Join(Parr,"")
		          pSeq=Pseq.ReplaceAll(" ","")
		          pSeq=Pseq.ReplaceAll(Chr(9),"")
		          pSeq=titl+EndOfLine.UNIX+pSeq
		          
		          outstream.Write(Pseq)
		          outstream.close
		        End If
		      End If
		      
		      'extract CRtagresidues :
		      hmmSearchRes=HMMsearchWithCRtags(CDSFile,hmmPath)
		      CRtag=NthField(hmmSearchRes,">",2)              'CR tag is between angle brackets
		      CRtagSeqField.Text=CRtag
		      'CRtagField.Text=CRtags(Me.ListIndex+1)
		      CRtagField.Text=CRtagPositions 'CRtagPositions were set by GetCRtags
		    End If
		  End If
		  
		  EnableSave
		  
		  Exception err
		    ExceptionHandler(err,"ProfileWizardWin:UpdateCRtag")
		End Sub
	#tag EndMethod


	#tag Property, Flags = &h0
		CRtags(0) As string
	#tag EndProperty

	#tag Property, Flags = &h0
		status As boolean = false
	#tag EndProperty


#tag EndWindowCode

#tag Events TrustedField
	#tag Event
		Sub TextChange()
		  CheckGathering
		End Sub
	#tag EndEvent
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  If Me.Text="" Then
		    If key=Chr(9) Then
		      Me.Text=Me.Hint
		    End If
		  End If
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events GatheringField
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  If Me.Text="" Then
		    If key=Chr(9) Then
		      me.text=me.Hint
		    End If
		  End If
		End Function
	#tag EndEvent
	#tag Event
		Sub TextChange()
		  EnableSave
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events NoiseField
	#tag Event
		Sub TextChange()
		  CheckGathering
		End Sub
	#tag EndEvent
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  If Me.Text="" Then
		    If key=Chr(9) Then
		      Me.Text=Me.Hint
		    End If
		  End If
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events FeatureCombo
	#tag Event
		Sub Change()
		  EnableSave
		End Sub
	#tag EndEvent
	#tag Event
		Sub Open()
		  Me.AddRow("promoter")
		  Me.AddRow("protein_bind")
		  Me.ListIndex = 1
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events KeyField
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  if key=chr(9) then 'tab pressed
		    if me.text="" then
		      me.text=me.CueText
		    end if
		    
		  end if
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events PalindromicBox
	#tag Event
		Sub Action()
		  LogoWin.Palindromic=me.value  'just in case of continuing with the profile from the main window after closing this one
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ValueField
	#tag Event
		Sub TextChange()
		  EnableSave
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events InfoArea
	#tag Event
		Sub Open()
		  me.TextFont=FixedFont
		  me.Italic=true
		  me.TextColor=&c99999900 'gray
		  me.text="Profile info"
		End Sub
	#tag EndEvent
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  if me.text="Profile info" then
		    me.Italic=false
		    me.TextColor=&c00000000
		    me.text=""
		  end if
		  
		  return false
		  
		End Function
	#tag EndEvent
	#tag Event
		Sub TextChange()
		  EnableSave
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events SaveButton
	#tag Event
		Sub Action()
		  
		  Dim SigFile As FolderItem
		  Dim dlg As New SaveAsDialog
		  Dim f, CDSFile As folderitem
		  Dim hmmSearchRes, hmmFile2find, hmmPath, ProtName as string
		  Dim m,n as integer
		  Dim SigFileVV As VirtualVolume
		  Dim id_mapping As New Dictionary
		  Dim rgmatch As New RegExMatch
		  Dim refseq_id As New RegEx
		  refseq_id.SearchPattern = "(?<=sp\|)[a-zA-Z0-9_]+"
		  dim hts as New DeNovoTFBSinference.HTTPSconnection
		  If Keyboard.AsyncOptionKey Then Return 'allow adding rows to listboxes
		  
		  LogoWin.show
		  
		  
		  'add missing UniProt/ NCBI IDs
		  
		  
		  dim splitP() as String
		  splitp=SeedProteinArea.text.split(EndOfLine.UNIX)
		  
		  'modify title line
		  'hmmsearch treats everything after first white space as sequence, so have to replace spaces/tabs
		  dim Pseq as string
		  splitP(0)=ReplaceAll(trim(splitP(0))," ","_")   'hmmer doesn't like spaces
		  splitP(0)=ReplaceAll(splitP(0),chr(9),"_")                'hmmer doesn't like tabs
		  
		  'find NCBI ID (should be at the line end and prefixed with "_GB=" 
		  pseq=SeedProteinArea.Text
		  If InStr(splitP(0),"_GB=") > 0 and  InStr(splitP(0),"|UP=") >0 Then
		    'pseq=SeedProteinArea.Text
		  ElseIf InStr(splitP(0),"_GB=") > 0 Then
		    dim GBid as string = NthField(splitP(0),"_GB=", 2)
		    if instr(GBid,"_")=0 then
		      id_mapping = hts.uniprotIDmapping(GBid, "EMBL-GenBank-DDBJ_CDS", "UniProtKB")   'INSDC CDS ID
		    else
		      id_mapping = hts.uniprotIDmapping(GBid, "RefSeq_Protein", "UniProtKB")                       'RefSeq CDS ID
		    end if
		    
		    if id_mapping.Value("status") then
		      splitP(0)=splitP(0)+"|UP=" + ID_mapping.Value("convertedCodes")
		      Pseq=Join(splitP,endOfLine.UNIX)
		      SeedProteinArea.Text=Pseq
		    end
		  Else
		    rgmatch=refseq_id.Search(splitP(0))
		    If rgmatch <> Nil Then
		      id_mapping = hts.uniprotIDmapping((rgmatch.SubExpressionString(0)), "UniProtKB_AC-ID", "RefSeq_Protein") 
		      if ID_mapping.Value("status") then
		        splitP(0)=splitP(0) +"_GB=" + ID_mapping.Value("convertedCodes") + "|UP=" + rgmatch.SubExpressionString(0)
		        Pseq=Join(splitP,endOfLine.UNIX)
		        SeedProteinArea.Text=Pseq
		      end
		      
		    End
		    
		  End If
		  
		  // Get CRtag sequence
		  ' write CDS seq to the tmp file
		  dim outStream as TextOutputStream
		  CDSFile=TemporaryFolder.child("CDSfile.fa")
		  if CDSFile<>Nil then
		    OutStream = TextOutputStream.Create(CDSFile)
		    if outStream<>Nil then
		      outstream.Write(Pseq)
		      outstream.close
		    end if
		  end if
		  
		  'find HMM file path:
		  hmmFile2find=TFhmmPopup.Text
		  
		  Dim HMM_ACC As String = GetHMMaccession(hmmFile2find)
		  
		  
		  
		  
		  ''extract CRtag:
		  'hmmSearchRes=HMMsearchWithCRtags(CDSFile,hmmPath)
		  'CRtag=NthField(hmmSearchRes,">",2)              'CR tag is between angle brackets
		  'CRtagSeqField.text=CRtag
		  
		  // Guess protein name 
		  ''assume the name goes first in the fasta title line
		  'ProtName=NthField(Pseq, ">",2)
		  ''ProtName=NthField(ProtName, " ", 1)   'should be separated by space...
		  'ProtName=NthField(ProtName, EndOfLine, 1)   '... or EndOfLine
		  ProtName=ValueField.text
		  
		  dlg.ActionButtonCaption = "Save"
		  dlg.Title = "Save .sig File"
		  dlg.PromptText = "Save calibrated profile with postprocessing settings"
		  dlg.SuggestedFileName=CRtagSeqField.text+"_"+ProtName+".sig"
		  dlg.filter = "Sig_file"
		  'dlg.InitialDirectory = Profile_f
		  dlg.CancelButtonCaption=kCancel
		  dlg.ActionButtonCaption=kSave
		  
		  
		  SigFile=dlg.ShowModal
		  If SigFile <> Nil Then
		    if SigFile.exists then
		      'a virtualVolume problem
		      #if TargetLinux
		        'SpecialFolder.Trash returns NIL in Linux, hence we can't do this properly here
		        msgbox "Can't overwrithe the existing .sig file. Please remove it or save the new file with a different name"
		        return
		      #else
		        dim fn as string = sigfile.ShellPath
		        SigFile.MoveFileTo(SpecialFolder.Trash) 'can't just delete because of the VirtualVolume inside
		        SigFile=GetFolderItem(fn,FolderItem.PathTypeShell)
		      #endif
		    end if
		    
		    
		    
		    
		    'read profile calibration values
		    dim cutoffs as string
		    if TrustedField.text<>"" then
		      cutoffs="#=GF TC "+trim(TrustedField.text)+" "+trim(TrustedField.text)+Endofline
		    else
		      'cutoffs="#=GF TC "+trim(GatheringField.text)+" "+trim(GatheringField.text)+Endofline
		    end if
		    cutoffs=cutoffs+"#=GF GA "+trim(GatheringField.text)+" "+trim(GatheringField.text)+Endofline
		    if NoiseField.text<>"" then
		      cutoffs=cutoffs+"#=GF NC "+trim(NoiseField.text)+" "+trim(NoiseField.text)+Endofline
		    else
		      'cutoffs=cutoffs+"#=GF GA "+trim(GatheringField.text)+" "+trim(GatheringField.text)+Endofline
		    end if
		    
		    
		    'cutoffs are hopefully read, convert the alignment to Stockholm format and store it in the temp file
		    dim stock as FolderItem = TemporaryFolder.child("stock")
		    if stock <> nil then
		      dim AlignmentFile,rcAlignmentFile as FolderItem
		      'copy alignment to temp (for weblogo)
		      
		      AlignmentFile=TemporaryFolder.Child(LogoWin.LogoFile.DisplayName)
		      
		      'CopyFileTo fails if the target exists, hence this check:
		      If AlignmentFile <> Nil then
		        if AlignmentFile.exists then
		          if AlignmentFile.ShellPath<>LogoWin.LogoFile.ShellPath then
		            AlignmentFile.delete
		            LogoWin.LogoFile.CopyFileTo(TemporaryFolder)
		          else
		            'the file is already there
		          end if
		        else
		          LogoWin.LogoFile.CopyFileTo(TemporaryFolder)
		        End If
		      End If
		      
		      
		      'check if the site is marked as palindromic
		      if palindromicBox.value then 'reverse complement every site
		        
		        if AlignmentFile<>Nil AND AlignmentFile.Exists then
		          'check if the alignment is already RC'd
		          dim firstLine,thirdLine as string
		          Dim tis As TextInputStream
		          tis=AlignmentFile.OpenAsTextFile
		          if tis<>nil then
		            firstLine=tis.readLine
		            thirdLine=tis.readLine
		            thirdLine=tis.readLine
		            tis.Close
		          End If
		          
		          if left(firstLine,3)=">f_" and left(thirdLine,3)=">r_" then
		            'looks like the seqs are palindromised already
		          else
		            rcAlignmentFile=TemporaryFolder.child("rcAliFile")
		            RevCompAlignment(AlignmentFile,rcAlignmentFile,true)
		            AlignmentFile.Delete
		            AlignmentFile=rcAlignmentFile
		            AlignmentFile.name=LogoWin.LogoFile.DisplayName
		          End If
		        end if
		        
		      end if
		      
		      
		      if AlignmentFile<>Nil AND AlignmentFile.Exists then
		        
		        
		        SigFileVV = SigFile.CreateVirtualVolume
		        If SigFileVV <> nil Then
		          'first copy the existing files:
		          'AlignmentFile.CopyFileTo(SigFileVV.Root)    'broken in Linux
		          CopyFileToVV(AlignmentFile,SigFileVV)                          'alignment
		          'get the base of profile name
		          dim baseName as string
		          basename= NthField(SigFile.DisplayName,".sig",1)
		          
		          'alignment file can have any name, so checking it here:
		          dim file2copy as folderitem
		          if AlignmentFile.Name<>basename+".fasta" then
		            dim wrongFile as folderitem=SigFileVV.Root.child(AlignmentFile.Name)
		            if wrongFile<>nil and wrongFile.exists then
		              wrongFile.name=basename+".fasta"
		            else
		              logowin.WriteToSTDOUT(EndOfLine+"Error writing .sig file")
		              return
		            End If
		          End If
		          
		          'Write options file:
		          
		          dim f2 as folderitem =SigFileVV.Root.child(basename+".options")
		          if f2<>nil then
		            'dim outstream As TextOutputStream
		            outstream = TextOutputStream.Create(f2)
		            
		            outstream.WriteLine("////")
		            outstream.WriteLine("// TF family and critical residue tag settings")
		            outstream.WriteLine("////")
		            outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// TF family HMM file name")
		            outstream.WriteLine("TF_HMM "+trim(TFhmmPopup.Text))
		            'outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// TF family HMM accession code")
		            outstream.WriteLine("HMM_ACC "+HMM_ACC)
		            
		            outstream.WriteLine("// CRtag coordinates")
		            outstream.WriteLine("CRtagCoords "+trim(CRtagField.text))
		            'outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// CRtag sequence")
		            outstream.WriteLine("CRtag "+trim(CRtagSeqField.text))
		            
		            
		            'get seed protein name and sequence
		            dim proteinID, proteinSeq as string
		            dim lineBreakC as integer
		            proteinSeq=trim(Pseq)
		            #if TargetWindows
		              
		              lineBreakC=instr(proteinSeq,chr(13))
		              if lineBreakC=0 then
		                msgbox "Incorrect seed protein data. Please use FASTA format with protein_id on the first line and sequence on the following lines."
		                return
		              End If
		              proteinID=NthField(proteinSeq,chr(13),1)
		            #else
		              lineBreakC=instr(proteinSeq,EndOfLine.Unix)
		              if lineBreakC=0 then
		                msgbox "Incorrect seed protein data. Please use FASTA format with protein_id on the first line and sequence on the following lines."
		                return
		              End If
		              proteinID=NthField(proteinSeq,EndOfLine.Unix,1)
		            #endif
		            proteinID=right(proteinID,len(proteinID)-1) 'remove the > sign
		            proteinSeq=CleanUp(right(proteinSeq,len(proteinSeq)-lineBreakC))
		            
		            outstream.WriteLine("// protein_id of the TF used to seed the profile")
		            outstream.WriteLine("protein_id "+proteinID)
		            'outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// seed protein sequence (single line)")
		            outstream.WriteLine("Seed_protein "+proteinSeq)
		            outstream.WriteLine(Endofline)
		            'outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("////")
		            outstream.WriteLine("// nhmmer options")
		            outstream.WriteLine("////")
		            outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// Trusted cutoff. Bit score per-sequence cutoff, set according to the lowest scores seen for true homologous sequences that were above the GA gathering thresholds, when gathering members of the alignment")
		            outstream.WriteLine("#=GF TC "+trim(TrustedField.text)+" "+trim(TrustedField.text))
		            outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// Gathering threshold. Bit score per-sequence cutoff used in gathering the members of the alignment")
		            outstream.WriteLine("#=GF GA "+trim(GatheringField.text)+" "+trim(GatheringField.text))
		            outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("//Noise cutoff. Bit score per-sequence cutoff, set according to the highest scores seen for unrelated sequences")
		            outstream.WriteLine("#=GF NC "+trim(NoiseField.text)+" "+trim(NoiseField.text))
		            outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// use the gathering threshold from the calibrated profile")
		            outstream.WriteLine("nhmmer.--cut_ga")
		            outstream.WriteLine(Endofline)
		            outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("////")
		            outstream.WriteLine("// HmmGen options")
		            outstream.WriteLine("////")
		            outstream.WriteLine(Endofline)
		            
		            'not used any more:
		            'outstream.WriteLine("// the alignment length")
		            'outstream.WriteLine("HmmGen.-L "+str(LogoWin.LogoLength))
		            'outstream.WriteLine(Endofline)
		            
		            if PalindromicBox.value then
		              outstream.WriteLine("// the site is palindromic")
		              outstream.WriteLine("HmmGen.-p")
		              outstream.WriteLine(Endofline)
		            end if
		            
		            'if NOT NextLocusBox.value then
		            'outstream.WriteLine("// don't pick up locus_tag from next locus")
		            'outstream.WriteLine("HmmGen.-n")
		            'outstream.WriteLine(Endofline)
		            'end if
		            
		            if WithinORFBox.value then
		              outstream.WriteLine("// ignore sites inside ORFs (and risk missing some real ones!)")
		              outstream.WriteLine("HmmGen.-i ")
		              outstream.WriteLine(Endofline)
		            end if
		            
		            outstream.WriteLine("// feature key")
		            outstream.WriteLine("HmmGen.-f "+FeatureCombo.Text)
		            outstream.WriteLine(Endofline)
		            
		            outstream.WriteLine("// feature qualifier")
		            outstream.WriteLine("HmmGen.-q "+KeyField.Text+"#"+ValueField.Text)
		            outstream.WriteLine(Endofline)
		            
		            'MASTgen p-value
		            outstream.WriteLine("// MASTgen p-value cutoff")
		            outstream.WriteLine("mastGen.-V "+MASTField.Text)
		            outstream.WriteLine(EndOfLine)
		            
		            'HMM accession code
		            
		            outstream.Close
		            
		            
		            'Write info file:
		            
		            f2=SigFileVV.Root.child(basename+".info")
		            if f2<>nil then
		              outstream = TextOutputStream.Create(f2)
		              outstream.Write(InfoArea.text)
		              outstream.close
		            End If
		            
		            'Write refs file:
		            
		            f2=SigFileVV.Root.child(basename+".refs")
		            If f2<>Nil Then
		              outstream = TextOutputStream.Create(f2)
		              Dim z as Integer
		              For z=0 To RefsList.RowCount-1
		                Dim aLine As String=RefsList.CellValueAt(z,0)+Chr(9)+RefsList.CellValueAt(z,1)+Chr(9)+RefsList.CellValueAt(z,2)
		                If Trim(aLine)<>"" Then
		                  aline=ReplaceAll(aline, EndOfLine.UNIX," ") 'lineEnds might be present  remove 'em
		                  outstream.WriteLine(CleanUpRefs(aline))   'cleanUp only needed when re-saving old .sig files
		                End If
		              Next
		              outstream.close
		            End If
		            
		            'Write curators file:
		            
		            f2=SigFileVV.Root.child(basename+".cur")
		            If f2<>Nil Then
		              outstream = TextOutputStream.Create(f2)
		              Dim z As Integer
		              For z=0 To CuratorList.RowCount-1
		                
		                
		                //check date format which might be different in old profiles
		                'current format is DD/MM/YYYY
		                'old default is MM/DD/YY
		                Dim cl,dt As String
		                cl=CuratorList.CellValueAt(z,2)
		                dt=Trim(NthField(cl,":",1))
		                if dt="" then exit 'empty line
		                Dim kbD,kbM,YY As String
		                kbD=NthField(dt,"/",1)
		                kbM=NthField(dt,"/",2)
		                YY=NthField(dt,"/",3)
		                If Len(yy)=2 Then
		                  YY="20"+YY
		                  If Val(kbD)>12 Then 'really days
		                    dt=kbd+"/"+kbM+"/"+YY
		                  Else 'assume the default US-en locale
		                    dt=kbM+"/"+kbD+"/"+YY
		                  End If
		                Else 'format is likely correct, but still checking to make sure
		                  If Val(kbM)>12 Then 'Oops
		                    dt=kbM+"/"+kbD+"/"+YY
		                  Else
		                    'just leave as is
		                    'dt=kbD+"/"+kbM+"/"+YY
		                  End If
		                End If
		                
		                dt=dt+":"+NthField(cl,":",2) 'add curation type
		                
		                Dim aLine As String=CuratorList.CellValueAt(z,0)+Chr(9)+CuratorList.CellValueAt(z,1)+Chr(9)+dt 'CuratorList.CellValueAt(z,2)
		                
		                If Trim(aLine)<>"" Then
		                  outstream.WriteLine(aline)
		                End If
		              Next
		              outstream.close
		            End If
		            
		            'Save MEME data
		            Dim tis As TextInputStream
		            tis=AlignmentFile.OpenAsTextFile
		            If tis<>Nil Then
		              f2=SigFileVV.Root.child("meme.txt")
		              If f2<>Nil Then
		                outstream = TextOutputStream.Create(f2)
		                outstream.Write(fasta2meme(tis.ReadAll))
		                tis.close
		                outstream.close
		              End If
		            End If
		            
		            'If MEMEconvert(LogoWin.Logofile,PalindromicBox.value)=0 then
		            'file2copy=TemporaryFolder.child("meme.txt")                     'meme.txt
		            'if file2copy<>Nil AND file2copy.exists then
		            'CopyFileToVV(file2copy,SigFileVV)
		            '
		            'If file2copy.LastErrorCode <> 0 Then
		            'msgbox "MEME result file copy error"
		            'End If
		            'else
		            ''this file is optional
		            'end if
		            'end
		            
		            'generate logodata and save it:
		            'dim weblogo_out as string = weblogo(AlignmentFile)
		            'f2=SigFileVV.Root.child(basename+".logodata")
		            'if weblogo_out <>"" then
		            'if f2<>nil then
		            'outstream = TextOutputStream.Create(f2)
		            'outstream.Write(weblogo_out)
		            'outstream.Close
		            'else
		            'msgbox "Can't write logo data file."
		            'return
		            'end if
		            'else
		            'LogoWin.WriteToSTDOUT (EndofLine+"Conversion to .sig file aborted because of a weblogo problem")
		            'return
		            'end if
		            
		            
		            Stockholm(AlignmentFile,stock, cutoffs)
		            
		            
		            'build hmm:
		            'need a real file for hmmbuild output:
		            f2 = TemporaryFolder.child(basename+".hmm")      'place to save
		            if f2<>nil then
		              FixPath4Windows(f2)
		              'change stockholm file name to fix NAME field inside the .hmm file
		              dim f3 as folderitem
		              f3=TemporaryFolder.child(basename)
		              if f3<>nil then
		                if f3.exists then
		                  f3.MoveToTrash
		                End If
		              End If
		              stock.Name=basename
		              if hmmbuild(stock.ShellPath,f2.ShellPath) then
		                if f2.exists then
		                  if f2<>Nil then
		                    
		                    // Add TF family name to the HMM file to use in local search output
		                    Dim TFFname as string
		                    dim HMMstr, hmmb, hmme as string
		                    Dim HMMin as TextInputStream
		                    Dim HMMout As TextOutputStream
		                    
		                    TFFname=FamilyNameFromHmmName(hmmFile2find)
		                    HMMin=f2.OpenASTextFile
		                    try
		                      HMMstr=HMMin.ReadAll
		                      HMMin.Close
		                      hmmb=nthfield(HMMstr,"STATS LOCAL MSV",1)
		                      hmme="STATS LOCAL MSV"+nthfield(HMMstr,"STATS LOCAL MSV",2)
		                      HMMstr=hmmb+"TFFAM "+TFFname+EndOfLine.UNIX+hmme
		                      HMMout=TextOutputStream.Create(f2)
		                      HMMout.Write(ConvertEncoding(HMMstr, Encodings.UTF8))
		                      HMMout.Close
		                    catch e as NilObjectException
		                      Msgbox "Can't save HMM file."
		                    end try
		                    
		                    CopyFileToVV(f2,SigFileVV)
		                    logowin.WriteToSTDOUT(EndOfLine+"sig file written to "+SigFile.ShellPath)
		                    LogoWin.BuildTBButtonMenu 'in case the .sig is saved to the active profiles dir
		                  else
		                    'beep
		                  end if
		                else
		                  'beep
		                end if
		              else
		                'error message handled by hmmbuild most of the time
		                logowin.WriteToSTDOUT(EndOfLine+"hmmbuild error")
		                return
		              end if
		            else
		              msgbox "Creating hmm failed"
		              return
		            end if
		          else
		            Msgbox "Can't create .sig file here. Please try another location."
		            
		          end if
		        else
		          Msgbox "Can't create .sig file here. Please try another location."
		        end if
		      else
		        msgbox "No alignment file found in the chosen folder. Can't proceed without it"
		        return
		      end if
		    else
		      msgbox "Can't create temporary file"
		      return
		    end if
		    
		  else
		    'cancelled
		  end if
		  
		  
		  
		  hide
		  Exception err
		    ExceptionHandler(err,"ProfileWisardWin:SaveButton:Action")
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events CancelButton
	#tag Event
		Sub Action()
		  hide
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events BevelButton1
	#tag Event
		Sub Action()
		  if me.Value then 'locked
		    ProfileWizardLocked=true
		    me.Caption="Unlock"
		  else
		    ProfileWizardLocked=false
		    me.Caption="Lock"
		  end if
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events TFhmmPopup
	#tag Event
		Sub Open()
		  Dim l,m,n As Integer
		  dim f, CDSFile as folderitem
		  dim OutStream as TextOutputStream
		  Dim hmmPath, fName, aLine, lineStart, hmm, CRtag, hmmSearchRes As String
		  Dim fnames(-1) As String
		  dim CRtagFileName as string
		  dim inStream as TextInputStream
		  'dim aNAME, ACC, DESC, CRtag, CRtagFileName as string
		  
		  'redim PopupFiles(-1)
		  'f=Profile_f
		  f=Resources_f.Child("TF_HMMs")
		  if f<>Nil then
		    if f.exists then
		      
		      m=f.Count
		      for n=1 to m
		        'dim dis as string= f.Item(n).DisplayName+": "+f.Item(n).type
		        'msgbox dis
		        
		        If Right(f.Item(n).name,4)=".hmm" Then
		          hmmPath = f.Item(n).ShellPath
		          fName = f.Item(n).DisplayName
		          
		          // Get CRtag residue positions
		          inStream=TextInputStream.Open(f.Item(n))
		          hmm=inStream.ReadAll
		          CRtag=NthField(hmm,"CRtag ",2)
		          CRtag=NthField(CRtag,EndOfLine,1)
		          
		          fnames.append(fName+"///"+CRtag)
		          
		          
		          
		          
		          
		          'if SeedProteinArea.TextColor=&c99999900 then 'placefiller
		          'Else                                                                             'hopefully, proper protein sequence
		          '' write CDS seq to the tmp file
		          'CDSFile=TemporaryFolder.child("CDSfile.fa")
		          'if CDSFile<>Nil then
		          'OutStream = TextOutputStream.Create(CDSFile)
		          'if outStream<>Nil then
		          ''hmmsearch treats everything after first white space as sequence, so have to replace spaces/tabs
		          'dim Pseq as string
		          'Pseq=ReplaceAll(SeedProteinArea.text," ","_")   'hmmer doesn't like spaces
		          'Pseq=ReplaceAll(Pseq,chr(9),"_")                'hmmer doesn't like tabs
		          '
		          'outstream.Write(Pseq)
		          'outstream.Write(Pseq)
		          'outstream.close
		          'end if
		          'end if
		          '
		          ''extract CRtagresidues :
		          'hmmSearchRes=HMMsearchWithCRtags(CDSFile,hmmPath)
		          'CRtag=NthField(hmmSearchRes,">",2)              'CR tag is between angle brackets
		          'CRtagSeqField.text=CRtag
		          'end if
		          '
		          
		          
		        end if
		        
		        
		        
		      next
		      
		      // sort and fill popup and CRtags()
		      
		      fnames.Sort
		      
		      For Each p As String In fnames
		        Me.AddRow(NthField(p,"///",1))
		        CRtags.Append (NthField(p,"///",2))
		      Next
		      
		    end if
		  end if
		  
		  Exception err
		    ExceptionHandler(err,"ProfileWizardWin:TFhmmPopup:open")
		End Sub
	#tag EndEvent
	#tag Event
		Sub Change()
		  UpdateCRtag
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events SeedProteinArea
	#tag Event
		Sub Open()
		  me.Italic=true
		  me.TextColor=&c99999900 'gray
		  me.text=">protein_id"+EndOfLine.UNIX+"sequence"
		End Sub
	#tag EndEvent
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  me.Italic=false
		  me.TextColor=&c00000000
		  if me.text=(">protein_id"+EndOfLine.UNIX+"sequence") then
		    me.text=""
		  end if
		  
		  return false
		  
		End Function
	#tag EndEvent
	#tag Event
		Sub TextChange()
		  UpdateCRtag
		End Sub
	#tag EndEvent
	#tag Event
		Function MouseDown(X As Integer, Y As Integer) As Boolean
		  me.Italic=false
		  me.TextColor=&c00000000
		  if me.text=(">protein_id"+EndOfLine.UNIX+"sequence") then
		    me.text=""
		  end if
		  
		  'return false
		  
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events RefsList
	#tag Event
		Function CellClick(row as Integer, column as Integer, x as Integer, y as Integer) As Boolean
		  If column=2 Then      'edit evidence
		    EvidenceCodesWin.LoadCodes(Me.CellValueAt(row,column))
		    EvidenceCodesWin.showmodal
		    Me.CellValueAt(row,column)=EvidenceCodesWin.CheckedCodes
		    
		  End If
		  
		  If Keyboard.CommandKey Or Keyboard.ControlKey Then  'need modifiers as the cell is editable
		    If column=1 Then      'follow link
		      'check if it's a DOI
		      Dim linkID As String = Trim(Me.CellValueAt(row,column))
		      Dim URL As String
		      If Left(linkID,3)="10." And InStr(linkID,"/")>0 Then
		        URL="https://doi.org/"
		        URL=URL+linkID
		      Elseif Left(linkID,4)="http" And InStr(linkID,"://")>0 Then'Database link
		        URL=linkID
		      Else 'assume it's a pubmed ID
		        URL="https://pubmed.ncbi.nlm.nih.gov/"
		        URL=URL+linkID
		      End If
		      
		      
		      WebBrowserWin.show
		      'WebBrowserWin.AddNewTab.LoadURL(url)
		      If WebBrowserWin.Title="" Then
		        WebBrowserWin.Title="View Reference"
		      End If
		      Dim pc As Integer
		      Dim ca As String
		      
		      If WebBrowserWin.BrowserPagePanel.PanelCount>0 Then
		        pc = WebBrowserWin.BrowserPagePanel.PanelCount
		        ca = WebBrowserWin.wBrowserTabs.tabs(WebBrowserWin.BrowserPagePanel.PanelCount-1).caption
		        If WebBrowserWin.wBrowserTabs.tabs(WebBrowserWin.BrowserPagePanel.PanelCount-1).caption="" Then 'load the page into the empty tab
		          AlreadyOpeningTab=True
		        End If
		      End If
		      WebBrowserWin.LoadPage(URL)
		      If ubound(WebBrowserWin.wBrowserTabs.tabs)>0 Then
		        If WebBrowserWin.wBrowserTabs.tabs(0).caption="" Or WebBrowserWin.wBrowserTabs.tabs(0).caption="Untitled" Then
		          If Not WebBrowserWin.mBrowserTabs(0).webViewer.canGoBack Then
		            WebBrowserWin.wBrowserTabs.removeTab(0)
		          End If
		        End If
		      End If
		    End If
		  End If
		  
		  'check to see if this is the last row and add a new one if so
		  
		  If row=Me.RowCount-1 Then'last row
		    
		    If Me.CellValueAt(row,0)<>"" Or Me.CellValueAt(row,1)<>"" Or Me.CellValueAt(row,2)<>"" Then
		      Me.AddRow
		    End If
		    
		    
		  End If
		  Exception err
		    ExceptionHandler(err,"ProfileWizardWin:RefsList:CellClick")
		End Function
	#tag EndEvent
	#tag Event
		Sub Open()
		  Me.AddRow
		  
		  Me.ColumnTypeAt(0) = ListBox.CellTypes.TextArea
		  Me.ColumnTypeAt(1) = ListBox.CellTypes.TextField
		End Sub
	#tag EndEvent
	#tag Event
		Sub CellTextChange(row as Integer, column as Integer)
		  // Is not triggered if text is changed from code!
		  
		  'check to see if this is the last row and add a new one is so
		  
		  If row=Me.RowCount-1 Then'last row
		    
		    If Me.CellValueAt(row,1)<>"" Or Me.CellValueAt(row,2)<>"" Then
		      Me.AddRow
		    End If
		    
		    
		  End If
		  
		  
		  'Check if a DOI was added/changed
		  If Column=1 Then
		    Dim link As String = Trim(Me.CellValueAt(row,1))
		    If left(link,4)="http" Then return      'Presumably a DB link, no need to process any further
		    NewDOI=""
		    Me.CellValueAt(row,0)=CitationFromDOI(Trim(Me.CellValueAt(row,1)))
		    If NewDOI<>"" Then
		      Me.CellValueAt(row,1)=NewDOI
		    End If
		  End If
		  
		  Exception err
		    ExceptionHandler(err,"ProfileWisardWin:RefsList:CellTextChange")
		End Sub
	#tag EndEvent
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  If Key=Chr(08) Then 'Delete key
		    Me.RemoveRowAt(Me.SelectedRowIndex)
		  Elseif Key=Chr(&h0D) Then 'Enter key
		    Me.AddRowAt(Me.SelectedRowIndex,"")
		  End If
		End Function
	#tag EndEvent
	#tag Event
		Function CellTextPaint(g As Graphics, row As Integer, column As Integer, x as Integer, y as Integer) As Boolean
		  If column = 1 Then
		    g.DrawingColor = &c0F7FFE00
		  End If
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events CuratorList
	#tag Event
		Sub Open()
		  Me.AddRow
		  Me.ColumnTypeAt(0) = ListBox.CellTypes.TextArea
		  Me.ColumnTypeAt(1) = ListBox.CellTypes.TextArea
		  Me.ColumnTypeAt(2) = ListBox.CellTypes.TextArea
		  
		End Sub
	#tag EndEvent
	#tag Event
		Sub CellTextChange(row as Integer, column as Integer)
		  'check to see if this is the last row and add a new one is so
		  
		  If row=Me.RowCount-1 Then'last row
		    
		    If Me.CellValueAt(row,1)<>"" Or Me.CellValueAt(row,2)<>""  Or Me.CellValueAt(row,3)<>"" Then
		      Me.AddRow
		    End If
		    
		    
		  End If
		End Sub
	#tag EndEvent
	#tag Event
		Function KeyDown(Key As String) As Boolean
		  If Key=Chr(08) Then 'Delete key
		    Me.RemoveRowAt(Me.SelectedRowIndex)
		  Elseif Key=Chr(&h0D) Then 'Enter key
		    Me.AddRowAt(Me.SelectedRowIndex,"")
		  End If
		  
		  
		End Function
	#tag EndEvent
	#tag Event
		Function CellTextPaint(g As Graphics, row As Integer, column As Integer, x as Integer, y as Integer) As Boolean
		  If column = 1 Then
		    g.DrawingColor = &c0F7FFE00
		  End If
		End Function
	#tag EndEvent
	#tag Event
		Function CellClick(row as Integer, column as Integer, x as Integer, y as Integer) As Boolean
		  
		  If Keyboard.CommandKey Or Keyboard.ControlKey Then  'need modifiers as the cell is editable
		    
		    If column=1 Then      'follow link
		      'check whether it's a web link or mail address
		      Dim linkID As String = Trim(Me.CellValueAt(row,column))
		      Dim URL As String
		      If Left(linkID,4)="http" And InStr(linkID,"//")>0 Then
		        WebBrowserWin.show
		        'WebBrowserWin.AddNewTab.LoadURL(linkID)
		        If WebBrowserWin.BrowserPagePanel.PanelCount>0 Then
		          If WebBrowserWin.wBrowserTabs.tabs(WebBrowserWin.BrowserPagePanel.PanelCount-1).caption=""  Or WebBrowserWin.wBrowserTabs.tabs(0).caption="Untitled" Then 'load the page into the empty tab
		            AlreadyOpeningTab=True
		          End If
		        End If
		        
		        
		        
		        If WebBrowserWin.BrowserPagePanel.PanelCount>0 Then
		          If WebBrowserWin.wBrowserTabs.tabs(WebBrowserWin.BrowserPagePanel.PanelCount-1).caption="" Then 'load the page into the empty tab
		            AlreadyOpeningTab=True
		          End If
		        End If
		        
		        WebBrowserWin.LoadPage(linkID)
		        
		        If ubound(WebBrowserWin.wBrowserTabs.tabs)>0 Then
		          If WebBrowserWin.wBrowserTabs.tabs(0).caption="" Or WebBrowserWin.wBrowserTabs.tabs(0).caption="Untitled" Then
		            If Not WebBrowserWin.mBrowserTabs(0).webViewer.canGoBack Then
		              WebBrowserWin.wBrowserTabs.removeTab(0)
		            End If
		          End If
		        End If
		      Elseif InStr(linkID,"@")>0 Then 'hopefully an email address
		        ShowURL("mailto:"+linkID)
		      End If
		    End If
		    
		  End If
		  Exception err
		    ExceptionHandler(err,"ProfileWizardWin:CuratorList:CellClick")
		    
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events SaveToDatabaseButton
	#tag Event
		Sub Action()
		  var map as Dictionary = CollectInfo()
		  'map.Value("ProteinID") = "TEST"+map.Value("ProteinID") // This is for tests
		  var importer as new DBimporter()
		  var res as boolean = importer.import(map)
		  If not res Then
		    logowin.WriteToSTDOUT(importer.error + EndOfLine)
		  End if
		  For i as integer=0 to importer.warnings.Count-1
		    logowin.WriteToSTDOUT(importer.warnings(i)+EndOfLine)
		  Next
		  
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events AddRefsButton
	#tag Event
		Sub Action()
		  Dim Info As String
		  Dim DOIs(0), Citations(0) As String
		  Dim CurrentDOI As String
		  Dim CitNo,n,m,doiNo As Integer
		  
		  
		  Info = InfoArea.Text
		  CitNo=CountFields(Info,"DOI:")
		  
		  If CitNo=1 Then Return  ' No DOI found
		  
		  
		  For n=2 To CitNo
		    CurrentDOI=NthField(Info,"DOI:",n)
		    
		    'try to trim the right edge exactly to the DOI
		    CurrentDOI=NthField(CurrentDOI,")",1)
		    CurrentDOI=NthField(CurrentDOI,"]",1)
		    
		    'check for several DOIs within this pair of brackets:
		    
		    If InStr(CurrentDOI,";")>0 Then
		      doiNo=CountFields(CurrentDOI,";")
		      For m=1 To doiNo
		        DOIs.append(Trim(NthField(CurrentDOI,";",m)))
		      Next
		    Elseif InStr(CurrentDOI,",")>0 Then
		      doiNo=CountFields(CurrentDOI,",")
		      For m=1 To doiNo
		        DOIs.append(Trim(NthField(CurrentDOI,",",m)))
		      Next
		    Else
		      DOIs.append(Trim(CurrentDOI))
		    End If
		    
		  Next
		  
		  doiNo=UBound(DOIs)
		  
		  'check if the last row is empty and remove it before appending new rows:
		  Dim LastRowEmpty As Boolean = True
		  If RefsList.CellValueAt(RefsList.LastRowIndex,0)<>"" Then
		    LastRowEmpty=False
		  Elseif RefsList.CellValueAt(RefsList.LastRowIndex,1)<>"" Then
		    LastRowEmpty=False
		  Elseif RefsList.CellValueAt(RefsList.LastRowIndex,2)<>"" Then
		    LastRowEmpty=False
		  End If
		  If LastRowEmpty Then
		    If RefsList.LastRowIndex>-1 Then
		      RefsList.RemoveRowAt(RefsList.LastRowIndex)
		    End If
		  End If
		  
		  'add citations:
		  For n=1 To doiNo
		    RefsList.AddRow
		    RefsList.CellValueAt(RefsList.LastRowIndex,1)=DOIs(n)
		    RefsList.CellValueAt(RefsList.LastRowIndex,0)=CitationFromDOI(Trim(DOIs(n)))
		  Next
		  
		  
		  
		  Exception err
		    ExceptionHandler(err,"ProfileWizardWin:AddRefsButton")
		    
		    
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events AddCuratorButton
	#tag Event
		Sub Action()
		  'check if the last row is empty and remove it before appending new rows:
		  Dim LastRowEmpty As Boolean = True
		  If CuratorList.CellValueAt(CuratorList.LastRowIndex,0)<>"" Then
		    LastRowEmpty=False
		  Elseif CuratorList.CellValueAt(CuratorList.LastRowIndex,1)<>"" Then
		    LastRowEmpty=False
		  Elseif CuratorList.CellValueAt(CuratorList.LastRowIndex,2)<>"" Then
		    LastRowEmpty=False
		  End If
		  If LastRowEmpty Then
		    If CuratorList.RowCount>0 Then
		      CuratorList.RemoveRowAt(CuratorList.LastRowIndex)
		    End If
		  End If
		  
		  
		  'Add curation info
		  CuratorList.AddRow
		  Dim lastIdx As Integer = CuratorList.LastRowIndex
		  CuratorList.CellValueAt(LastIdx,0)=Trim(SettingsWin.NameField.Text)
		  CuratorList.CellValueAt(LastIdx,1)=Trim(SettingsWin.emailField.Text)
		  Dim cInfo As String
		  Dim d As DateTime=DateTime.now
		  'cInfo=d.ToString(Locale.Current, DateTime.FormatStyles.Short, DateTime.FormatStyles.None)+": "
		  'fix for unified data format DD/MM/YYYY
		  cinfo = d.Day.ToString + "/" + d.Month.ToString + "/" + d.Year.ToString + ":"
		  If lastIdx>0 Then 'continue existing list
		    CuratorList.CellValueAt(LastIdx,2)=cInfo+"profile modified"
		  Else                               'first entry
		    CuratorList.CellValueAt(LastIdx,2)=cInfo+" profile created"
		  End If
		  
		  Exception err
		    ExceptionHandler(err,"ProfileWizardWin:AddCuratorButton:Action")
		    
		End Sub
	#tag EndEvent
#tag EndEvents
#tag ViewBehavior
	#tag ViewProperty
		Name="MinimumWidth"
		Visible=true
		Group="Size"
		InitialValue="64"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MinimumHeight"
		Visible=true
		Group="Size"
		InitialValue="64"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MaximumWidth"
		Visible=true
		Group="Size"
		InitialValue="32000"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MaximumHeight"
		Visible=true
		Group="Size"
		InitialValue="32000"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Type"
		Visible=true
		Group="Frame"
		InitialValue="0"
		Type="Types"
		EditorType="Enum"
		#tag EnumValues
			"0 - Document"
			"1 - Movable Modal"
			"2 - Modal Dialog"
			"3 - Floating Window"
			"4 - Plain Box"
			"5 - Shadowed Box"
			"6 - Rounded Window"
			"7 - Global Floating Window"
			"8 - Sheet Window"
			"9 - Metal Window"
			"11 - Modeless Dialog"
		#tag EndEnumValues
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasCloseButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasMaximizeButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasMinimizeButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasFullScreenButton"
		Visible=true
		Group="Frame"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="DefaultLocation"
		Visible=true
		Group="Behavior"
		InitialValue="0"
		Type="Locations"
		EditorType="Enum"
		#tag EnumValues
			"0 - Default"
			"1 - Parent Window"
			"2 - Main Screen"
			"3 - Parent Window Screen"
			"4 - Stagger"
		#tag EndEnumValues
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasBackgroundColor"
		Visible=true
		Group="Background"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="BackgroundColor"
		Visible=true
		Group="Background"
		InitialValue="&hFFFFFF"
		Type="Color"
		EditorType="Color"
	#tag EndViewProperty
	#tag ViewProperty
		Name="Backdrop"
		Visible=true
		Group="Appearance"
		InitialValue=""
		Type="Picture"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Composite"
		Visible=false
		Group="Appearance"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="FullScreen"
		Visible=false
		Group="Appearance"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Height"
		Visible=true
		Group="Position"
		InitialValue="400"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="ImplicitInstance"
		Visible=true
		Group="Appearance"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Interfaces"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MacProcID"
		Visible=false
		Group="Appearance"
		InitialValue="0"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MenuBar"
		Visible=true
		Group="Appearance"
		InitialValue=""
		Type="MenuBar"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MenuBarVisible"
		Visible=false
		Group="Appearance"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Name"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Resizeable"
		Visible=true
		Group="Appearance"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Super"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Title"
		Visible=true
		Group="Appearance"
		InitialValue="Untitled"
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Visible"
		Visible=true
		Group="Appearance"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Width"
		Visible=true
		Group="Position"
		InitialValue="600"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="status"
		Visible=false
		Group="Behavior"
		InitialValue="false"
		Type="boolean"
		EditorType=""
	#tag EndViewProperty
#tag EndViewBehavior
